{% extends 'base.html' %}  <!-- Estende o template base.html -->

{% load static %}  <!-- Carrega a tag 'static' para incluir arquivos estáticos -->

<!-- Define o título da página -->
{% block title %}
    Lista de Produtos
{% endblock %}

<!-- Bloco principal da página -->
{% block content %}
    <link rel="stylesheet" href="{% static 'css/listar_produtos.css' %}">

    <!-- Cabeçalho da lista de produtos -->
    <h1 class="h">Meus Produtos Adicionados</h1>  
     
    <!-- Formulário - filtro de produtos -->
    <form method="get" class="mb-4 p-3 border rounded">
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Filtrar</button>
    </form>

    <div class="container-botoes">
        <a href="{% url 'adicionar_produto' %}" class="btn-adicionar">Adicionar Produto</a>
    </div> 

    <div class="produto-grid">
        <!-- Loop através de cada produto na lista -->
        {% for produto in produtos %}
            <div class="produto-card"> 

                <!-- Loop através de cada produto na lista -->
                <div class="status_produto"> 
                    <p>Status: {{ produto.get_status_display }}</p>
                </div>

                {% if produto.imagem %}
                    <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" style="max-width: 200px; max-height: 200px;">
                {% else %}
                    <p>Sem imagem disponível</p>
                {% endif %}
                            
                <h3>{{ produto.nome }}</h3>
                <p>{{ produto.descricao }}</p>
                <p>Preço da Caixa: R$ {{ produto.preco }}</p>
                <p>Quantidade de Caixas: {{ produto.quantidade }}</p>


                <!-- Links para editar e excluir o produto -->
                <a href="{% url 'editar_produto' produto.id %}" class="btn btn-warning btn-sm">Editar</a>
                <a href="{% url 'excluir_produto' produto.id %}" class="btn btn-danger btn-sm">Excluir</a>
                
            </div>
        
        {% empty %}
            <div class="h">
                <h3>Não há produtos</h3>
            </div>
        {% endfor %}
        
    </div>
{% endblock %}
